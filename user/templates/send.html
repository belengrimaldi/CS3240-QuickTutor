{% extends 'base.html' %}
{% block content %}
{% load static %}

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="{% static 'user/send.css' %}">

<body>
	<div class="container">
		<div class="row justify-content-center">

			<div class="col-md-6">
				<div class="form-group">
					<div class="text-center">
						<h1 class="title" style="margin-bottom: 1rem;">Inbox</h1>
						<p style="font-size: small;">Click to see messages between you and another user</p>
						{% if pen_pals %}
							{% for pal in pen_pals %}
							<div class="list-group"> 
								<div class="row justify-content-center">
									<a href="{% url 'log' pal.username %}" class="list-group-item listItem" >{{pal.first_name}} {{pal.last_name}}</a> 
								</div>
							</div>
			
							<!-- <li  class="text-center"><a href="{% url 'log' pal.username %}">{{ pal.username }}</a></li> -->
							{% endfor %}
						{% else %}
							<p>No messages yet</p>
						{% endif %}
					</div>
				</div>

			</div>

			<div class="col-md-6">

				{% if messages %}
					{% for message in messages %}
						{% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
						<ul class="bg-success">
							<div class="text-center">
								<p {% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</p>
							</div>
						</ul>
						{% endif %}
						{% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
						<ul class="bg-warning">
							<div class="text-center">
								<p {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
							</div>
						</ul>
						{% endif %}
					{% endfor %}
				{% endif %}

				<div class="form-group">
					<div class="text-center">
						<h1 class="title">New Message</h1>
						<form method="POST" class="message-form" novalidate>{% csrf_token %}
							<!-- {{ form.as_p}} -->
							{{ form.non_field_errors }}
							<div class="fieldWrapper form-group row justify-content-center">
								{{ form.recipient.errors }}
								<label class="recip" for="{{ form.recipient.id_for_label }}">Recipient Email:</label>
								{{ form.recipient }}
							</div>
							<div class="fieldWrapper form-group row justify-content-center message">
								{{ form.msg_content.errors }}
								<label for="{{ form.msg_content.id_for_label }}">Message:</label>
							</div>
							<div class="fieldWrapper form-group row justify-content-center">
								<div class="col-md-12">
									{{ form.msg_content }}
								</div>
							</div>
							<button type="submit" class="save btn btn-primary">Send</button>
						</form>
					</div>
				</div>

			</div>
			
		</div>
	</div>
</body>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

{% endblock %}
